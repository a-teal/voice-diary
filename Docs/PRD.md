# PRD: Voice Diary (음성 일기 서비스)

## 1. 개요

### 1.1 프로젝트 요약
**Voice Diary**는 음성으로 빠르게 일기를 기록하고, AI가 자동으로 키워드와 감정을 분석하여 시각화해주는 서비스입니다.

### 1.2 핵심 가치
- **간편함**: 음성으로 30초 안에 일기 기록 완료
- **자동 분석**: AI가 키워드 추출 및 감정 분석
- **시각화**: 일간/월간/연간 감정 흐름을 한눈에 파악

### 1.3 타겟 사용자
- 일기를 쓰고 싶지만 귀찮아서 포기하는 사람
- 자신의 감정 패턴을 파악하고 싶은 사람
- 빠르고 간편한 기록을 원하는 직장인/학생

---

## 2. 문제 정의

### 2.1 기존 문제
| 문제 | 설명 |
|------|------|
| 시간 부족 | 일기 쓰는 데 시간이 너무 오래 걸림 |
| 귀찮음 | 타이핑/펜 기록이 번거로움 |
| 지속 실패 | 일기 습관 형성에 반복적으로 실패 |
| 통찰 부재 | 기록만 하고 분석/회고가 어려움 |

### 2.2 솔루션
- 음성 입력으로 기록 시간 최소화
- AI 자동 분석으로 인사이트 제공
- 시각화로 감정 패턴 인지 용이

---

## 3. 핵심 기능

### 3.1 음성 기록
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 음성 녹음 | 버튼 하나로 녹음 시작/종료 | P0 |
| STT 변환 | 음성을 텍스트로 자동 변환 | P0 |
| 텍스트 편집 | 변환된 텍스트 수정 가능 | P1 |

### 3.2 AI 분석
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 키워드 추출 | 일기에서 핵심 키워드 3-5개 추출 | P0 |
| 감정 분석 | 대표 감정 이모지 1개 자동 선택 | P0 |
| 요약 생성 | 한 줄 요약 자동 생성 | P1 |

### 3.3 시각화
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 일간 뷰 | 오늘의 일기 + 키워드 + 감정 표시 | P0 |
| 월간 캘린더 | 날짜별 감정 이모지 표시 | P1 |
| 주간 키워드 클라우드 | 한 주 주요 키워드 시각화 | P2 |
| 감정 그래프 | 시간에 따른 감정 변화 추이 | P2 |
| 연간 통계 | 월별 감정 분포, 연간 키워드 | P2 |

---

## 4. 상세 기능 명세

### 4.1 음성 녹음 플로우
```
[메인 화면] → [녹음 버튼 클릭] → [녹음 중...] → [완료 버튼]
                                                    ↓
                              [STT 변환 중...] → [텍스트 확인/편집]
                                                    ↓
                              [AI 분석 중...] → [결과 표시 + 저장]
```

### 4.2 감정 이모지 세트 (10개)
| 이모지 | 감정 | 설명 |
|--------|------|------|
| 😊 | 기쁨 | 행복, 즐거움, 만족 |
| 😢 | 슬픔 | 우울, 외로움, 아쉬움 |
| 😠 | 분노 | 화남, 짜증, 불만 |
| 😰 | 불안 | 걱정, 초조, 긴장 |
| 😌 | 평온 | 차분함, 편안함 |
| 😴 | 피곤 | 지침, 무기력 |
| 🤔 | 고민 | 생각이 많음, 복잡함 |
| 😎 | 자신감 | 뿌듯함, 성취감 |
| 🥰 | 사랑 | 애정, 감사, 따뜻함 |
| 😐 | 무덤덤 | 특별한 감정 없음 |

### 4.3 데이터 모델
```typescript
interface DiaryEntry {
  id: string;
  createdAt: Date;

  // 원본 데이터
  transcript: string;     // STT 변환 텍스트

  // AI 분석 결과
  keywords: string[];     // 키워드 3-5개
  emotion: string;        // 감정 이모지
  summary?: string;       // 한 줄 요약

  // 메타데이터
  userId?: string;        // 로그인 시에만 (로컬 저장은 없음)
  editedAt?: Date;
  syncedAt?: Date;        // 클라우드 동기화 시간
}
```

---

## 5. 화면 구성

### 5.1 메인 화면 (일간 뷰)
- 상단: 날짜 네비게이션 (< 오늘 >)
- 중앙: 오늘의 일기 카드
  - 감정 이모지 (크게)
  - 키워드 태그들
  - 일기 텍스트 (접기/펼치기)
- 하단: 녹음 버튼 (FAB)

### 5.2 월간 캘린더 뷰
- 캘린더 그리드
- 각 날짜에 감정 이모지 표시
- 날짜 클릭 시 해당 일기로 이동

### 5.3 통계 뷰
- 이번 달 감정 분포 (파이 차트)
- 감정 변화 추이 (라인 차트)
- 자주 나온 키워드 (워드 클라우드)

---

## 6. 기술 스택

### 6.1 프론트엔드
| 기술 | 선택 이유 |
|------|-----------|
| Next.js 14 | SSR + PWA 지원, 빠른 개발 |
| TypeScript | 타입 안정성 |
| Tailwind CSS | 빠른 스타일링 |
| PWA | 모바일 앱처럼 설치 가능 |

### 6.2 백엔드/인프라
| 기술 | 선택 이유 |
|------|-----------|
| Supabase | Auth + DB + Storage 통합 |
| PostgreSQL | 구조화된 데이터 저장 |
| Vercel | Next.js 최적화 호스팅 |

### 6.3 AI/음성
| 기술 | 선택 이유 |
|------|-----------|
| Web Speech API | 무료, 실시간 타이핑 UX |
| Claude API | 키워드/감정 분석 |

> **참고**: 초기에는 Web Speech API(무료)로 시작. 정확도 이슈 발생 시 Whisper로 업그레이드 검토.

---

## 7. 개발 단계

### Phase 1: MVP 핵심 기능
**목표**: 음성으로 일기 쓰고 AI 분석 결과 보기

- [ ] 프로젝트 셋업 (Next.js + PWA)
- [ ] 음성 녹음 + 실시간 STT (Web Speech API)
- [ ] AI 분석 API 연동 (Claude)
- [ ] 일간 뷰 UI
- [ ] 로컬 저장 (IndexedDB/localStorage)

### Phase 2: 시각화
**목표**: 감정 패턴을 시각적으로 파악

- [ ] 월간 캘린더 뷰
- [ ] 주간 키워드 클라우드
- [ ] 감정 변화 그래프
- [ ] 날짜 네비게이션

### Phase 3: 고도화
**목표**: 사용성 개선 및 기능 확장

- [ ] 연간 통계 뷰
- [ ] 텍스트 편집 기능
- [ ] 로그인 + 클라우드 동기화 (Supabase)
- [ ] 알림/리마인더
- [ ] PWA 최적화 (오프라인 지원)

---

## 8. 성공 지표 (KPI)

### 8.1 사용자 지표
| 지표 | 목표 |
|------|------|
| DAU (Daily Active Users) | 출시 1개월 후 100명 |
| 리텐션 (D7) | 30% 이상 |
| 평균 기록 빈도 | 주 3회 이상 |

### 8.2 제품 지표
| 지표 | 목표 |
|------|------|
| 평균 기록 시간 | 1분 이내 |
| STT 정확도 | 90% 이상 |
| AI 분석 만족도 | 4.0/5.0 이상 |

---

## 9. 향후 확장 가능성

- **음성 AI 대화**: 녹음 후 AI와 대화하며 일기 보완
- **감정 패턴 알림**: "최근 스트레스가 높아요" 알림
- **공유 기능**: 월간 감정 리포트 이미지 공유
- **다국어 지원**: 영어, 일본어 등
- **웨어러블 연동**: Apple Watch에서 빠른 녹음

---

## 10. 결정 사항

| 이슈 | 결정 | 비고 |
|------|------|------|
| 플랫폼 | ✅ PWA 웹앱 | 모바일처럼 설치 가능 |
| 음성 변환 | ✅ Web Speech API (실시간) | 무료, 정확도 이슈 시 Whisper 검토 |
| 로그인 | ✅ 필수 아님 | 로컬 저장 기본, 로그인 시 클라우드 동기화 |
| 수익 모델 | ✅ 보류 | MVP 이후 검토 |
| 음성 파일 저장 | ✅ 저장 안함 | 텍스트 변환 후 삭제 |
