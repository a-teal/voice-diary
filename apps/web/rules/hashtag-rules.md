# Hashtag Extraction Rules

목표: 일기/음성전사 입력에서 **주제·요약 중심 해시태그 3-6개**를 추출한다.
주의: **감정 해시태그는 생성하지 않는다** (감정은 이모지로 별도 처리).

## 1) Output 규격

- 출력: `keywords: string[]` (3-6개, # 제외)
- 한 기록 = 한 언어 (혼용 금지)
- 중복 의미 제거 (동의어/유사어는 1개만)
- 정렬: 중요도 높은 순

### 포맷
- KO: 한글 명사/명사구, 공백 제거 (예: `회의`, `일정조정`, `범위조정`)
- EN: lowercase, 공백 제거 (예: `projectdeadline`, `scopechange`)

---

## 2) 무엇을 뽑나 (키워드 유형)

A. **Event/Action (필수 1-2개)**
- 오늘의 사건/행동/상황을 대표하는 명사/명사구
- 예: 회의, 출장, 운동, 쇼핑, 약속

B. **Topic/Entity (선택 1-2개)**
- 핵심 대상/주제 (조직, 프로젝트, 사람 범주, 사물, 분야)
- 예: 팀장, 프로젝트, 고객, 카페

C. **Outcome/Decision (선택 0-2개)**
- 결론/이슈/결정/문제/조정
- 예: 결정, 연기, 취소, 완료

---

## 3) 무엇을 제외하나 (하드 룰)

### 절대 제외
- 감정 단어: 불안, 우울, 짜증, 행복, 기쁨, 슬픔, 화남, 걱정, 피곤 등
- 과잉 일반어: 하루, 일상, 기록, 생각, 느낌, today, daily, life, thoughts
- 문장형/서술형: 오늘너무힘듦, 정말좋았다
- 개인정보: 실명, 주소, 전화번호 → 역할/범주로 치환 (예: 팀장, 동료, 고객)

### 배경/장소 일반어 (더 구체적인 키워드가 있으면 제외)
- 회사, 학교, 집, 사무실, 밖, 직장, office, home, school, work
- 이 단어들은 "배경"일 뿐, 핵심 사건이 아닌 경우 제외
- 예: "회사에서 레퍼체크 연락 옴" → `["레퍼체크"]` (O), `["회사"]` (X)
- 예: "회사에서 팀미팅 했다" → `["팀미팅"]` (O), `["회사"]` (X)
- 단, 장소 자체가 핵심 사건이면 허용: "새 회사 첫 출근" → `["새회사", "첫출근"]`

### 정규화 규칙
- 유사 의미는 대표 태그 하나로 통일
  - 회사일, 업무 → work
  - 미팅, 회의 → 회의
- 복합 개념은 짧은 핵심 명사로 축약
  - 중요한결정해야함 → 결정

---

## 4) 우선순위

1. **고유명사** (사람 범주, 장소, 브랜드)
2. **구체적 행위** (운동, 회의, 쇼핑)
3. **핵심 사물** (선물, 음식, 책)
4. **맥락 영역** (work, family, health)

---

## 5) 예시

### 예시 1 (한국어)
입력: "오늘 팀 회의에서 일정이 밀려서 범위를 줄이기로 했다. 핵심 기능만 먼저 내자."
출력: `["회의", "일정", "범위조정", "핵심기능"]`

### 예시 2 (한국어, 감정과 무관)
입력: "오늘 강남역에서 친구랑 떡볶이 먹었다. 맛있었는데 좀 피곤하네."
출력: `["강남역", "친구", "떡볶이"]`
(감정은 exhausted지만 해시태그는 구체적 명사 위주)

### 예시 3 (배경 vs 핵심 구분)
입력: "회사에서 레퍼체크 연락이 왔다. 이전 직장에 전화한다고."
출력: `["레퍼체크", "이전직장"]`
(회사는 배경일 뿐, 레퍼체크가 핵심 사건)

### 예시 4 (영어)
입력: "I worked on the onboarding flow and decided to remove one step."
출력: `["onboarding", "flow", "decision"]`

---

## 6) Acceptance Checklist

- [ ] 3-6개인가?
- [ ] 감정 키워드가 0개인가?
- [ ] 한 기록 = 한 언어로 통일됐나?
- [ ] Event/Action 태그가 최소 1개 포함됐나?
- [ ] 중복 의미 태그가 제거됐나?
